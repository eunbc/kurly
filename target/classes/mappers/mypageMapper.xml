<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.spring.cjs200809.dao.MypageDao">
	
	<!-- 카트 리스트 -->
	<select id="getMyWishlist" resultType="com.spring.cjs200809.vo.WishlistVo">
	 select *
	 from wishlist w
	     inner join goods g
	         on w.gIDX = g.gIDX   
	     where mMID=#{mMID} order by wIDX desc;
	</select>	
	
	<delete id="wishDelete">
		delete from wishlist where wIDX=#{wIDX};
	</delete>
	
	<insert id="addEmoney">
		insert into emoney values (default,#{mMID},#{ePLUS},NULL,default,#{eCONTENT});
	</insert>	
	
	<insert id="subtractEmoney">
		insert into emoney values (default,#{mMID},NULL,#{oEMONEY},default,#{eCONTENT});
	</insert>
	
	<select id="getMyOrder" resultType="com.spring.cjs200809.vo.OrderVo">
		select oDATE,oNVOICE,oAMOUNT,oSTATUS from orderinfo where mMID=#{mMID} order by oIDX desc;
	</select>

	<select id="getMyOrderInfo" resultType="com.spring.cjs200809.vo.OrderVo">
		select o.*,cp.cpPRICE from orderinfo o 
			left join coupon cp on o.cpIDX=cp.cpIDX 
				where oNVOICE=#{oNVOICE};
	</select>
	
	<select id="getMyEmoneyList" resultType="com.spring.cjs200809.vo.EmoneyVo">
		select ePLUS, eMINUS, eDATE,eCONTENT from emoney where mMID=#{mMID} order by eIDX desc;
	</select>
</mapper>